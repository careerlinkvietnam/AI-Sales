{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://careerlink.vn/schemas/candidate.json",
  "title": "Candidate Schema",
  "description": "Candidate recommendation with rationale and career summary (B案仕様)",
  "definitions": {
    "CandidateRationale": {
      "type": "object",
      "description": "Explanation of why this candidate is recommended",
      "properties": {
        "reasonTags": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1,
          "description": "Tags explaining match reasons (e.g., '勤務地一致', '業界近似', '職種一致')"
        },
        "evidenceFields": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1,
          "description": "Source fields used for matching (e.g., 'company.location.region', 'company.industryText', 'candidate.careerSummary')"
        }
      },
      "required": ["reasonTags", "evidenceFields"]
    },
    "Candidate": {
      "type": "object",
      "description": "A candidate recommendation with career summary",
      "properties": {
        "candidateId": {
          "type": "string",
          "description": "Unique candidate identifier"
        },
        "headline": {
          "type": "string",
          "description": "Brief summary of role/experience (no PII)"
        },
        "careerSummary": {
          "type": "string",
          "minLength": 1,
          "maxLength": 400,
          "description": "Short career summary (200-300 chars typical, max 400). Must not contain PII (email, phone, address, birthdate)."
        },
        "keySkills": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Key skills relevant to the company"
        },
        "location": {
          "type": ["string", "null"],
          "description": "Candidate's location/region"
        },
        "availability": {
          "type": ["string", "null"],
          "description": "Availability status"
        },
        "yearsOfExperience": {
          "type": ["integer", "null"],
          "minimum": 0,
          "description": "Total years of relevant experience"
        },
        "jobTitle": {
          "type": ["string", "null"],
          "description": "Current or most recent job title (no company name)"
        },
        "industryExperience": {
          "type": ["string", "null"],
          "description": "Industry experience summary"
        },
        "rationale": {
          "$ref": "#/definitions/CandidateRationale",
          "description": "Why this candidate matches"
        }
      },
      "required": ["candidateId", "headline", "careerSummary", "keySkills", "rationale"]
    },
    "CandidateSearchResult": {
      "type": "object",
      "properties": {
        "candidates": {
          "type": "array",
          "items": { "$ref": "#/definitions/Candidate" }
        },
        "totalFound": {
          "type": "integer"
        },
        "searchCriteria": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        },
        "mode": {
          "type": "string",
          "enum": ["stub", "real"]
        }
      },
      "required": ["candidates", "mode"]
    }
  }
}
